# é¡¹ç›®ç»“æ„è¯´æ˜

## ğŸ“ ç›®å½•ç»“æ„

```
Lab3-2/
â”œâ”€â”€ src/                           # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ lexer.l                   # Flexè¯æ³•åˆ†æå™¨å®šä¹‰
â”‚   â”œâ”€â”€ parser.y                  # Bisonè¯­æ³•åˆ†æå™¨å®šä¹‰
â”‚   â”œâ”€â”€ tree.h / tree.c           # æŠ½è±¡è¯­æ³•æ ‘å®šä¹‰å’Œæ“ä½œ
â”‚   â”œâ”€â”€ semantic.h / semantic.c   # è¯­ä¹‰åˆ†æå™¨
â”‚   â”œâ”€â”€ codegen.h / codegen.c     # ä»£ç ç”Ÿæˆå™¨ï¼ˆå«ä¼˜åŒ–åŠŸèƒ½ï¼‰
â”‚   â””â”€â”€ main.c                    # ä¸»ç¨‹åºå…¥å£
â”œâ”€â”€ tests/                        # æµ‹è¯•ç”¨ä¾‹ç›®å½•
â”‚   â”œâ”€â”€ optimization/             # ä¼˜åŒ–åŠŸèƒ½æµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ test_arithmetic_optimization.c
â”‚   â”‚   â”œâ”€â”€ test_array_optimization.c
â”‚   â”‚   â”œâ”€â”€ test_chain_optimization.c
â”‚   â”‚   â”œâ”€â”€ test_constant_only.c
â”‚   â”‚   â”œâ”€â”€ test_dead_code_elimination.c
â”‚   â”‚   â”œâ”€â”€ test_multidim_optimization.c
â”‚   â”‚   â”œâ”€â”€ test_optimization_enhanced.c
â”‚   â”‚   â””â”€â”€ test_simple_reduction.c
â”‚   â”œâ”€â”€ test_01_basic_variables.c  # åŸºç¡€åŠŸèƒ½æµ‹è¯•
â”‚   â”œâ”€â”€ test_02_arithmetic.c
â”‚   â”œâ”€â”€ ...
â”‚   â””â”€â”€ test_error_*.c            # é”™è¯¯å¤„ç†æµ‹è¯•
â”œâ”€â”€ test_results/                 # æµ‹è¯•ç»“æœè¾“å‡º
â”œâ”€â”€ scripts/                      # æ„å»ºå’Œæµ‹è¯•è„šæœ¬
â”‚   â”œâ”€â”€ run_tests.bat            # åŸºç¡€åŠŸèƒ½æµ‹è¯•è„šæœ¬
â”‚   â”œâ”€â”€ run_optimization_tests.bat # ä¼˜åŒ–åŠŸèƒ½æµ‹è¯•è„šæœ¬
â”‚   â””â”€â”€ demo_instruction_reduction.bat # æ¼”ç¤ºè„šæœ¬
â”œâ”€â”€ docs/                         # æ–‡æ¡£ç›®å½•
â”‚   â”œâ”€â”€ ä¸­é—´ä»£ç ä¼˜åŒ–å®ç°æŠ¥å‘Š.md
â”‚   â”œâ”€â”€ æµ‹è¯•æŠ¥å‘Š_ä¸­é—´ä»£ç ä¼˜åŒ–.md
â”‚   â”œâ”€â”€ ä¼˜åŒ–æµ‹è¯•æ€»ç»“.md
â”‚   â”œâ”€â”€ æŒ‡ä»¤å‡å°‘æµ‹è¯•æŠ¥å‘Š.md
â”‚   â””â”€â”€ é¡¹ç›®ç»“æ„è¯´æ˜.md
â”œâ”€â”€ Makefile                      # æ„å»ºé…ç½®
â”œâ”€â”€ README.md                     # é¡¹ç›®è¯´æ˜
â”œâ”€â”€ .gitignore                    # Gitå¿½ç•¥æ–‡ä»¶é…ç½®
â””â”€â”€ æ–‡æ³•å®šä¹‰.txt                  # è¯­æ³•å®šä¹‰æ–‡æ¡£
```

## ğŸ”§ æ„å»ºè¯´æ˜

### ç¼–è¯‘é¡¹ç›®

```bash
make clean  # æ¸…ç†æ—§æ–‡ä»¶
make        # ç¼–è¯‘é¡¹ç›®
```

### è¿è¡Œæµ‹è¯•

```bash
make test   # è¿è¡Œæ‰€æœ‰æµ‹è¯•
```

æˆ–è€…å•ç‹¬è¿è¡Œï¼š

```bash
cd scripts
./run_tests.bat                    # åŸºç¡€åŠŸèƒ½æµ‹è¯•
./run_optimization_tests.bat       # ä¼˜åŒ–åŠŸèƒ½æµ‹è¯•
./demo_instruction_reduction.bat   # ä¼˜åŒ–æ¼”ç¤º
```

## ğŸ“‹ æ–‡ä»¶è¯´æ˜

### æ ¸å¿ƒæºä»£ç  (src/)

- **lexer.l**: Flex è¯æ³•åˆ†æå™¨å®šä¹‰ï¼Œå®šä¹‰äº† C è¯­è¨€çš„è¯æ³•è§„åˆ™
- **parser.y**: Bison è¯­æ³•åˆ†æå™¨å®šä¹‰ï¼Œå®šä¹‰äº† C è¯­è¨€çš„è¯­æ³•è§„åˆ™
- **tree.h/c**: æŠ½è±¡è¯­æ³•æ ‘çš„æ•°æ®ç»“æ„å®šä¹‰å’ŒåŸºæœ¬æ“ä½œ
- **semantic.h/c**: è¯­ä¹‰åˆ†æå™¨ï¼Œè¿›è¡Œç±»å‹æ£€æŸ¥å’Œä½œç”¨åŸŸåˆ†æ
- **codegen.h/c**: ä»£ç ç”Ÿæˆå™¨ï¼Œç”Ÿæˆä¸‰åœ°å€ç å¹¶è¿›è¡Œä¼˜åŒ–
- **main.c**: ä¸»ç¨‹åºï¼Œå¤„ç†å‘½ä»¤è¡Œå‚æ•°å’Œè°ƒç”¨å„ä¸ªæ¨¡å—

### æµ‹è¯•ç”¨ä¾‹ (tests/)

- **åŸºç¡€åŠŸèƒ½æµ‹è¯•**: test*01*_.c åˆ° test*10*_.c
- **é”™è¯¯å¤„ç†æµ‹è¯•**: test*error*\*.c
- **ä¼˜åŒ–åŠŸèƒ½æµ‹è¯•**: tests/optimization/ ç›®å½•ä¸‹çš„æ–‡ä»¶

### æ„å»ºè„šæœ¬ (scripts/)

- **run_tests.bat**: è¿è¡ŒåŸºç¡€åŠŸèƒ½æµ‹è¯•
- **run_optimization_tests.bat**: è¿è¡Œä¼˜åŒ–åŠŸèƒ½æµ‹è¯•
- **demo_instruction_reduction.bat**: æ¼”ç¤ºæŒ‡ä»¤å‡å°‘æ•ˆæœ

### æ–‡æ¡£ (docs/)

- åŒ…å«æ‰€æœ‰æŠ€æœ¯æ–‡æ¡£å’Œæµ‹è¯•æŠ¥å‘Š

## ğŸ¯ ä¼˜åŒ–åŠŸèƒ½

é¡¹ç›®å®ç°äº†ä»¥ä¸‹ä¸­é—´ä»£ç ä¼˜åŒ–æŠ€æœ¯ï¼š

1. **å¸¸é‡æŠ˜å ** - ç¼–è¯‘æ—¶è®¡ç®—å¸¸é‡è¡¨è¾¾å¼
2. **å¸¸é‡ä¼ æ’­** - ä¼ æ’­å¸¸é‡å€¼
3. **æ­»ä»£ç æ¶ˆé™¤** - åˆ é™¤æœªä½¿ç”¨çš„å˜é‡å’Œä»£ç 
4. **å†—ä½™èµ‹å€¼æ¶ˆé™¤** - åˆ é™¤å¤šä½™çš„èµ‹å€¼æ“ä½œ
5. **å…¬å…±å­è¡¨è¾¾å¼æ¶ˆé™¤** - é¿å…é‡å¤è®¡ç®—

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

ä¼˜åŒ–åçš„ä»£ç å¹³å‡å‡å°‘æŒ‡ä»¤æ•°é‡ï¼š

- ç®€å•æµ‹è¯•ç”¨ä¾‹ï¼š57.1% å‡å°‘
- å¤æ‚æµ‹è¯•ç”¨ä¾‹ï¼š46.2% å‡å°‘
- å¸¸é‡ä¼˜åŒ–ï¼š37.5% å‡å°‘
- **å¹³å‡ä¼˜åŒ–ç‡ï¼š47.3%**
